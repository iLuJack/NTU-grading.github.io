<!DOCTYPE html>
<html lang="{{ site.lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}</title>
    <meta name="description" content="{{ site.description }}">
    
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="{{ site.baseurl }}/assets/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="{{ site.baseurl }}/assets/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ site.baseurl }}/assets/favicon/favicon-16x16.png">
    <link rel="manifest" href="{{ site.baseurl }}/assets/favicon/site.webmanifest">
    
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.2/css/buttons.dataTables.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ site.baseurl }}/css/styles.css">
    
</head>
<body>
    <header>
        <!-- Add your header/navigation here -->
    </header>

    <main>
        {{ content }}
    </main>

    <div id="cookie-notice" style="display: none;" class="cookie-notice">
        <p>本網站使用 cookies 來改善使用者體驗</p>
        <div class="cookie-buttons">
            <button onclick="acceptAnalytics()" class="accept-btn">接受</button>
            <button onclick="rejectAnalytics()" class="reject-btn">拒絕</button>
        </div>
    </div>

    <!-- jQuery and DataTables -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.4.2/js/buttons.html5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    
    <!-- Custom JS -->
    <script src="{{ site.baseurl }}/js/index.js"></script>

    <!-- Cookie consent script -->
    <script>
        // Show cookie notice on page load if consent not given
        document.addEventListener('DOMContentLoaded', function() {
            if (localStorage.getItem('analytics-consent') === null) {
                document.getElementById('cookie-notice').style.display = 'block';
            }
        });

        // Accept analytics
        function acceptAnalytics() {
            localStorage.setItem('analytics-consent', 'accepted');
            localStorage.removeItem('analytics-opt-out');
            document.getElementById('cookie-notice').style.display = 'none';
            location.reload(); // Reload to enable analytics
        }

        // Reject analytics
        function rejectAnalytics() {
            localStorage.setItem('analytics-consent', 'rejected');
            localStorage.setItem('analytics-opt-out', 'true');
            document.getElementById('cookie-notice').style.display = 'none';
        }
    </script>
</body>
</html> 